<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Elements of the Language</title><link rel="stylesheet" href="core.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"/></head><body><div class="sect1" title="Elements of the Language"><div class="titlepage"><div><div><h1 class="title"><a id="objectcpr-CHP-1-SECT-3"/>Elements of the Language</h1></div></div></div><p><a id="objectcpr-IDXTERM-27" class="indexterm"/> <a id="objectcpr-IDXTERM-28" class="indexterm"/>Objective-C extends the C language with the following
      concepts and constructs:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Objects (instances of classes)</p></li><li class="listitem"><p>Classes</p></li><li class="listitem"><p>Inheritance and subtyping</p></li><li class="listitem"><p>Fields</p></li><li class="listitem"><p>Methods and method calls (or messages)</p></li><li class="listitem"><p>Categories</p></li><li class="listitem"><p>Protocols</p></li><li class="listitem"><p>Declarations (extended from C to include class and protocol
          types)</p></li><li class="listitem"><p>Predefined types, constants, and variables</p></li><li class="listitem"><p>Compiler and preprocessor directives</p></li></ul></div><p>The following sections will describe these aspects of
      Objective-C.</p><div class="sect2" title="Objects"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.1"/>Objects</h2></div></div></div><p>Objects <a id="IXT-1-27" class="indexterm"/>are the compound values—data and operations—at the heart
        of object-oriented programming. They are generalizations of simple
        structured types found in C and many other languages. Like C structs,
        objects have components—data fields—that maintain state. For example,
        a <code class="literal">Book</code> object might have fields to
        specify the author and publisher. In addition, objects interact
        through message passing, which provides an alternative to the function
        calls of a procedural language.</p><p>Objective-C objects have these attributes:</p><div class="variablelist"><dl><dt><span class="term">Class</span></dt><dd><p>An object type. An object whose type is <code class="literal">MyClass</code> is said to be an
              <span class="emphasis"><em>instance</em></span> of <code class="literal">MyClass</code>.</p></dd><dt><span class="term">Fields</span></dt><dd><p>Data <a id="IXT-1-28" class="indexterm"/>members of an object. An object has its own copies
              of the fields declared by its class or its ancestor
              classes.</p></dd></dl></div><div class="note" title="Note"><h3 class="title"><a id="ch01-5-fm2xml"/>Note</h3><p>Fields are also referred to as "<a id="IXT-1-29" class="indexterm"/>instance variables." I prefer the term "fields" for
          several reasons: "instance variables" is redundant since there are
          no class variables, it is ambiguous since it could mean variables
          that are instances, just "variables" would be more ambiguous, and
          "fields" is shorter. (An alternative term is "<a id="IXT-1-30" class="indexterm"/>ivars.")</p></div><div class="variablelist"><dl><dt><span class="term">Methods</span></dt><dd><p>Functions <a id="IXT-1-31" class="indexterm"/>provided by an object. An object responds to
              methods declared by its class or ancestor classes.</p></dd></dl></div><div class="note" title="Note"><h3 class="title"><a id="ch01-6-fm2xml"/>Note</h3><p>A few special objects (class objects) acquire their fields and
          methods differently. <a class="link" href="ch01s09.html" title="Runtime Environment">Section
          1.9</a> describes class objects.</p></div><p>Objective-C objects are implemented so that:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>They exist in dynamically allocated memory.</p></li><li class="listitem"><p>They can't be declared on the stack or passed by value to
            other scopes.</p></li><li class="listitem"><p>They are referred to only by pointers.</p></li></ul></div><p>When someone says of an Objective-C variable: "<code class="literal">c</code> is an instance of <code class="literal">C</code>", you should understand that to mean that
        <code class="literal">c</code> is a pointer to an object of type
        <code class="literal">C</code>.</p></div><div class="sect2" title="Classes"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.2"/>Classes</h2></div></div></div><p>Classes <a id="objectcpr-IDXTERM-34" class="indexterm"/>are types in Objective-C. The
        <span class="emphasis"><em>interface</em></span> <a id="IXT-1-32" class="indexterm"/> of a class specifies the structure of its instances;
        the <span class="emphasis"><em>implementation</em></span> <a id="IXT-1-33" class="indexterm"/> <a id="IXT-1-34" class="indexterm"/> provides its code. The interface and implementation of
        a class are separate, usually in different files. Categories add to an
        existing class without subclassing it; they also have separate
        interface and implementation. Protocols are pure interface
        declarations.</p><p><a id="IXT-1-35" class="indexterm"/>Classes declare the following attributes:</p><div class="variablelist"><dl><dt><span class="term">Parent class</span></dt><dd><p>The <a id="IXT-1-36" class="indexterm"/>class whose methods and fields will be inherited
              by the new class being declared.</p></dd><dt><span class="term">Class name</span></dt><dd><p>The name of the class being declared.</p></dd><dt><span class="term">Fields</span></dt><dd><p>Data members of each instance of the class.</p></dd><dt><span class="term">Instance methods</span></dt><dd><p>Functions <a id="IXT-1-37" class="indexterm"/>associated with instances of the class.</p></dd><dt><span class="term">Class methods</span></dt><dd><p>Functions <a id="IXT-1-38" class="indexterm"/>associated with the class itself.</p></dd></dl></div><p>Because Objective-C makes calling class methods syntactically
        identical to calling instance methods, classes themselves behave much
        like objects. <a class="link" href="ch01s09.html" title="Runtime Environment">Section
        1.9</a> discusses class objects.</p><div class="sect3" title="Declaring an interface"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.2.1"/>Declaring an interface</h3></div></div></div><p>An <a id="objectcpr-IDXTERM-42" class="indexterm"/> <a id="objectcpr-IDXTERM-43" class="indexterm"/>interface names a class and declares its parent (if
          any), fields, and methods, without specifying any implementation.
          (You can't use C++-style inline methods, implemented in the header.)
          A header file can contain any number of interface declarations, but
          it is conventional to put each interface in a separate header file.
          By default, <em class="filename">gcc</em> expects the
          filename to end in <span class="emphasis"><em>.h</em></span>.</p><p>Following is an example interface declaration. (Note that the
          line numbers are not part of the source code.)</p><a id="I_1_tt9"/><pre class="programlisting"> 1<strong class="userinput"><code>#import</code></strong> "<em class="replaceable"><code>Graphic.h</code></em>"
 2
 3 <strong class="userinput"><code>@class</code></strong> 
                  <em class="replaceable"><code>Point</code></em>;
 4
 5 <strong class="userinput"><code>@interface</code></strong> 
                  <em class="replaceable"><code>Circle</code></em> : <em class="replaceable"><code>Graphic</code></em> {
 6   <strong class="userinput"><code>@protected</code></strong>  // or @public or @private
 7     <strong class="userinput"><code>float</code></strong>  
                  <em class="replaceable"><code>radius</code></em>; 
<strong class="userinput"><code> </code></strong>8     <em class="replaceable"><code>Point</code></em>* <em class="replaceable"><code>center</code></em>;
 9 }
10   -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>scaleBy</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>factor</code></em>;
11   +(int)<em class="replaceable"><code>numCircles</code></em>;
12 <strong class="userinput"><code>@end</code></strong></pre><p>Line 1. The <strong class="userinput"><code>#import</code></strong>
          <a id="IXT-1-39" class="indexterm"/> directive is like C's <strong class="userinput"><code>#include</code></strong> <a id="IXT-1-40" class="indexterm"/> directive, except that the compiler ensures that no
          file is included more than once. You always need to import the
          declaration of your class's parent class (if any). You don't need to
          import any other Objective-C class declarations, but it may be
          convenient to import some umbrella header files as a matter of
          routine.</p><p>Line 3. You use the <strong class="userinput"><code>@class</code></strong> declaration when your class's
          fields, or the return values or parameters of your class's methods,
          are instances of another class. You can use separate <strong class="userinput"><code>@class</code></strong> declarations for distinct
          classes, or use a single declaration with the class names separated
          by commas.</p><p>A class declaration doesn't need any more information about
          any other class, so you don't need to import a header unless the
          header has other declarations (e.g., macros or globals) that your
          class declaration needs.</p><p>Line 5. Specify the name of your class and that of the parent
          class (if any). The name of your class will be visible to any code
          that includes the header file. All class names exist in the global
          namespace, along with global variable names and type names.</p><p>Line 6. <a id="IXT-1-41" class="indexterm"/>Access keywords control compile-time checking of
          access to fields. You can repeat these as often as you want; a field
          has the access <a id="IXT-1-42" class="indexterm"/>permission specified by the most recent preceding
          keyword. If there is no preceding keyword, access permission
          defaults to protected.</p><p>In brief, public fields are visible to all subclasses and all
          external code, protected fields are visible only to subclasses, and
          private fields are visible only in the class being declared. <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.4" title="Fields">Section 1.3.4</a> gives exact
          rules.</p><p>Line 7. Declare <a id="IXT-1-43" class="indexterm"/>fields in the same manner as you declare structure
          members in C. Fields can be of any C type, as well as of any class
          or other type (described in <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.9" title="Predefined Types, Constants, and Variables">Section 1.3.9</a>) added by
          Objective-C. Fields can have the same name as methods in the same
          class.</p><p>Fields are not shared between instances—that is, Objective-C
          does not support class variables. But you can get the same effect by
          declaring ordinary variables as <strong class="userinput"><code>static</code></strong> <a id="IXT-1-44" class="indexterm"/> <a id="IXT-1-45" class="indexterm"/> in the implementation file. (See the following <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.2.2" title="Implementing a class">Section 1.3.2.2</a> for an
          example.)</p><p>Line 8. You incorporate other objects only by pointer, not by
          value. Objective-C's predefined <strong class="userinput"><code>id</code></strong>, <code class="literal">Class</code>, and <code class="literal">Protocol</code> types are pointer types
          already.</p><p>Line 9. No semicolon after the closing brace.</p><p>Line 10. An <a id="IXT-1-46" class="indexterm"/>instance method is marked with a <code class="literal">-</code> <a id="IXT-1-47" class="indexterm"/> character. Instance methods operate on instances of
          the class. Method signatures use Objective-C's infix syntax,
          discussed later in <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.5" title="Methods">Section
          1.3.5</a>.</p><p>You don't need to redeclare a method if you are inheriting it.
          It is conventional to redeclare a method if your class inherits and
          overrides it. <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.5.4" title="Naming collisions">Section
          1.3.5.4</a> explains why you should declare a method in all other
          cases. (But not necessarily in the header file; see <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.5.5" title="Private methods">Section 1.3.5.5</a>.)
          Methods can have the same name as fields of the same class, and
          instance methods can share names with class methods.</p><p>Line 11. A <a id="IXT-1-48" class="indexterm"/>class method is marked with a <code class="literal">+</code> <a id="IXT-1-49" class="indexterm"/> character. Class methods perform operations or return
          information about the class as a whole, and don't pertain to any
          instance of the class.</p><p>Line 12. No semicolon after the <a id="IXT-1-50" class="indexterm"/> <strong class="userinput"><code>@end</code></strong>
          <a id="IXTR3-536" class="indexterm"/> <a id="IXTR3-537" class="indexterm"/>keyword.</p></div><div class="sect3" title="Implementing a class"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.2.2"/>Implementing a class</h3></div></div></div><p>You <a id="IXT-1-51" class="indexterm"/> <a id="IXT-1-52" class="indexterm"/>implement a class by writing the code (i.e., the
          bodies) for each of the class's methods. A file can contain any
          number of class implementations, but it is conventional to put each
          implementation in a separate file. By default, <em class="filename">gcc</em> expects the filename to end in
          <span class="emphasis"><em>.m</em></span> (for Objective-C) or
          <span class="emphasis"><em>.mm</em></span> or <span class="emphasis"><em>.M</em></span> (for
          Objective-C++). Even if a class has no methods, it must have an
          empty implementation.</p><div class="note" title="Note"><h3 class="title"><a id="ch01-7-fm2xml"/>Note</h3><p>If you don't provide a class implementation, the compiler
            will not emit support code for the class, and the linker will
            fail.</p></div><p>Here is a simple implementation for the class declared in the
          previous section:</p><a id="I_1_tt10"/><pre class="programlisting">1<strong class="userinput"><code>#import</code></strong> "<em class="replaceable"><code>Circle.h</code></em>"
2
3 <strong class="userinput"><code>static</code></strong> 
                  <strong class="userinput"><code>int</code></strong> 
                  <em class="replaceable"><code>count</code></em>;
4
5 <strong class="userinput"><code>@implementation</code></strong> 
                  <em class="replaceable"><code>Circle</code></em>
6   // No field section.
7   +(<strong class="userinput"><code>int</code></strong>)<em class="replaceable"><code>numCircles</code></em> { <strong class="userinput"><code>return</code></strong> 
                  <em class="replaceable"><code>count</code></em>; }
8   -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>scaleBy</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>factor</code></em> { <em class="replaceable"><code>radius</code></em> *= <em class="replaceable"><code>factor</code></em>;}
9 <strong class="userinput"><code>@end</code></strong></pre><p>Line 1. Always import the header file that declares your
          class. If your code uses other classes (e.g., it sends messages to
          them or their instances) you need to import the headers of those
          classes too. There is little point to using an <strong class="userinput"><code>@class</code></strong> declaration here—if you use
          another class in an implementation you will need its interface
          declaration.</p><p>Line 3. This is a pure C declaration, reserving space for a
          per-class variable. (In this example, it would be used to keep count
          of the number of objects created. That code is not shown.) It will
          be visible only in this implementation file.</p><p>Line 5. Specify the name of the class you are
          implementing.</p><p>Line 6. You can't add any more fields here, so there is no
          brace-delimited section corresponding to the one in the interface
          declaration.</p><p>Lines 7, 8. Define methods with the same signature syntax as
          in the header; follow each method definition with the code, in
          braces. For more information on writing the code, see <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.5" title="Methods">Section 1.3.5</a>.</p><p>Line 9. No semicolon after the <strong class="userinput"><code>@end</code></strong> <a id="IXTR3-538" class="indexterm"/>keyword.</p></div></div><div class="sect2" title="Inheritance and Subtyping"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.3"/>Inheritance and Subtyping</h2></div></div></div><p><a id="IXT-1-53" class="indexterm"/> <a id="IXT-1-54" class="indexterm"/>Inheritance and <a id="IXT-1-55" class="indexterm"/> <a id="IXT-1-56" class="indexterm"/>subtyping are the fundamental object-oriented features:
        inheritance lets you declare how one type differs from another, and
        subtyping lets you substitute one kind of object for another when
        their types are compatible.</p><p>A class's <a id="IXT-1-57" class="indexterm"/>interface may declare that it is based on another
        class:</p><a id="I_1_tt11"/><pre class="programlisting"><strong class="userinput"><code>@interface</code></strong> 
               <em class="replaceable"><code>MyClass</code></em> : <em class="replaceable"><code>Parent</code></em></pre><p>This is <a id="IXT-1-58" class="indexterm"/>described by saying <em class="replaceable"><code>MyClass</code></em>
        is a <span class="emphasis"><em>subclass</em></span> <a id="IXT-1-59" class="indexterm"/> of <em class="replaceable"><code>Parent</code></em>, and has the
        following runtime effects:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><em class="replaceable"><code>MyClass</code></em> responds to any class
            method that <em class="replaceable"><code>Parent</code></em> responds to.</p></li><li class="listitem"><p>Instances of <em class="replaceable"><code>MyClass</code></em> have all the
            fields that instances of <em class="replaceable"><code>Parent</code></em>
            have.</p></li><li class="listitem"><p>Instances of <em class="replaceable"><code>MyClass</code></em> respond to
            any instance methods that instances of
            <em class="replaceable"><code>Parent</code></em> respond to.</p></li></ul></div><p>These effects are summarized by saying
        <em class="replaceable"><code>MyClass</code></em> <span class="emphasis"><em>inherits</em></span>
        <em class="replaceable"><code>Parent</code></em>'s fields and methods. These
        properties imply that inheritance is transitive: any subclass of
        <em class="replaceable"><code>MyClass</code></em> also inherits from
        <em class="replaceable"><code>Parent</code></em>.</p><p>Declaring a <a id="IXT-1-60" class="indexterm"/> <a id="IXT-1-61" class="indexterm"/>class and specifying a parent also has these effects at
        compile time:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>You can refer to inherited methods and fields.</p></li><li class="listitem"><p>You can assign variables declared as
            <em class="replaceable"><code>MyClass</code></em> to variables declared as
            <em class="replaceable"><code>Parent</code></em>.</p></li></ul></div><p>This is described by saying <em class="replaceable"><code>MyClass</code></em>
        is a <span class="emphasis"><em>subtype</em></span> of
        <em class="replaceable"><code>Parent</code></em>. Subtyping is also transitive. For
        example, any subclass of <em class="replaceable"><code>MyClass</code></em> is a
        subtype of <em class="replaceable"><code>Parent</code></em>.</p><p>You can't redeclare fields in a subclass, either identically or
        with a different type. (Unlike C++, this holds even if the inherited
        field was declared private.)</p><p>A subclass can replace, or <span class="emphasis"><em>override</em></span>
        <a id="IXT-1-62" class="indexterm"/> <a id="IXT-1-63" class="indexterm"/>, an inherited method with a different version. You do
        this by providing a new implementation for the method when you write
        the subclass. At runtime, instances of the subclass will execute the
        new code in the overriding method instead of the code of the inherited
        method. By definition, the overriding method has the same name as the
        inherited one; it must also have the same return and parameter types.
        (You can't <a id="IXT-1-64" class="indexterm"/> <a id="IXT-1-65" class="indexterm"/>overload methods as in C++.) You don't need to redeclare
        the overriding method, but it is conventional to do so.</p></div><div class="sect2" title="Fields"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.4"/>Fields</h2></div></div></div><p><a id="objectcpr-IDXTERM-74" class="indexterm"/>Fields are data members of objects. Each object gets its
        own copy of the fields it inherits or declares.</p><p>Inside the methods of a class you can refer directly to fields
        of <strong class="userinput"><code>self</code></strong> <a id="objectcpr-IDXTERM-75" class="indexterm"/>, either declared in the class or (if they are not
        private) inherited:</p><a id="I_1_tt12"/><pre class="programlisting"><strong class="userinput"><code>@interface</code></strong> 
               <em class="replaceable"><code>Circle</code></em> : <em class="replaceable"><code>Graphic</code></em> {
  <strong class="userinput"><code>float</code></strong> 
               <em class="replaceable"><code>radius</code></em>;   // Protected field.
  // etc.
<strong class="userinput"><code>@end</code></strong>
               <strong class="userinput"><code>   </code></strong>
               <strong class="userinput"><code>@implementation</code></strong> 
               <em class="replaceable"><code>Circle</code></em>
  -(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>diameter</code></em> {
    <strong class="userinput"><code>return</code></strong> 2 * <em class="replaceable"><code>radius</code></em>; // No need to say self-&gt;radius.
  }
<strong class="userinput"><code>@end</code></strong></pre><p>If an object other than <strong class="userinput"><code>self</code></strong> is statically typed, you can refer to
        its public fields with the dereference operator:</p><a id="I_1_tt13"/><pre class="programlisting"><em class="replaceable"><code>AClass</code></em>* <em class="replaceable"><code>obj</code></em>;      // Static typing required.
<em class="replaceable"><code>obj</code></em>-&gt;<em class="replaceable"><code>aField</code></em> = 7;  // Presuming aField is public.</pre><div class="sect3" title="Access modifiers"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.4.1"/>Access modifiers</h3></div></div></div><p><a id="IXT-1-66" class="indexterm"/>Access to an object's field depends on four
          things:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The field's access <a id="IXT-1-67" class="indexterm"/>permission (public, private, or protected)</p></li><li class="listitem"><p>The class of the accessing code</p></li><li class="listitem"><p>The class of the object</p></li><li class="listitem"><p>The nature of the object: whether it is the receiver
              (<strong class="userinput"><code>self</code></strong>) or another
              variable (global, local, or method parameter)</p></li></ul></div><p>There is no notion of read-only members in Objective-C: if you
          can read a field, you can also write to it.</p><p>You declare a field's access permission in its class's
          interface. Any of three access keywords—<strong class="userinput"><code>@public</code></strong> <a id="IXT-1-68" class="indexterm"/> <a id="IXT-1-69" class="indexterm"/> <a id="IXT-1-70" class="indexterm"/>, <strong class="userinput"><code>@protected</code></strong>,
          and <strong class="userinput"><code>@private</code></strong>—may appear any
          number of times in an interface declaration and affects all fields
          declared after it until the next access keyword. (See the example in
          <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.2" title="Classes">Section 1.3.2</a>.) If
          there is no preceding keyword, a field has protected access.</p><p>Following are the keywords and their effects on access to an
          object's fields:</p><div class="variablelist"><dl><dt><span class="term"><strong class="userinput"><code>@public</code></strong></span></dt><dd><p>A public field is visible to all code.</p></dd><dt><span class="term"><strong class="userinput"><code>@protected</code></strong></span></dt><dd><p>If the object is <strong class="userinput"><code>self</code></strong>, a protected field is
                visible.</p><p>If the object is not <strong class="userinput"><code>self</code></strong>, access depends on its
                class:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>If the object's class is the same as that of the
                    receiver, the field is visible.</p></li><li class="listitem"><p>If the object inherits from the receiver's class,
                    the field is not visible. (You can get around this by
                    casting the object to the receiver's class.)</p></li><li class="listitem"><p>If the object has any other relation to the
                    receiver's class, the field is not visible.</p></li></ul></div></dd><dt><span class="term"><strong class="userinput"><code>@private</code></strong></span></dt><dd><p>If the object is <strong class="userinput"><code>self</code></strong>, a private field is
                visible.</p><p>If the object is not <strong class="userinput"><code>self</code></strong>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>If the object's class is the same as that of the
                    receiver, the field is visible.</p></li><li class="listitem"><p>In all other cases, the field is <strong class="userinput"><code/></strong> <a id="IXTR3-539" class="indexterm"/>not <a id="IXTR3-540" class="indexterm"/>visible.</p></li></ul></div></dd></dl></div></div></div><div class="sect2" title="Methods"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.5"/>Methods</h2></div></div></div><p><a id="objectcpr-IDXTERM-83" class="indexterm"/>Methods are the functions associated with an object, and
        are used as interfaces for querying or changing the object's state, or
        for requesting it to perform some action.</p><p>Objective-C uses the terms "calling a method" and "sending a
        message" interchangeably. This is because method dispatch is less like
        dereferencing a function pointer and more like searching for a
        recipient and delivering a message. Most of the work of method lookup
        is done at runtime.</p><p>You send messages to objects using Objective-C's bracket syntax.
        Method names are associated with parameters using an infix syntax
        borrowed from Smalltalk. Objective-C provides directives for accessing
        the runtime dispatch mechanism directly.</p><div class="sect3" title="Declaring a method"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.1"/>Declaring a method</h3></div></div></div><p>You <a id="objectcpr-IDXTERM-84" class="indexterm"/>declare <a id="IXT-1-71" class="indexterm"/>a method in an interface or protocol by specifying who
          handles it (either the class or an instance of the class), its
          <a id="objectcpr-IDXTERM-86" class="indexterm"/>return type, its name, and its parameter types (if
          any). The name is broken up so that part of it precedes each
          parameter. The form of a declaration depends on the number of
          <a id="objectcpr-IDXTERM-87" class="indexterm"/>parameters, as described in the following
          sections.</p><div class="sect4" title="No parameters"><div class="titlepage"><div><div><h4 class="title"><a id="objectcpr-CHP-1-SECT-3.5.1.1"/>No parameters</h4></div></div></div><a id="I_1_tt14"/><pre class="programlisting">-(<strong class="userinput"><code>id</code></strong>)init;</pre><p>This <a id="IXT-1-72" class="indexterm"/>declaration can be broken down as follows:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">-</code></span></dt><dd><p><a id="IXT-1-73" class="indexterm"/> <a id="IXT-1-74" class="indexterm"/>Indicates an instance method; use a <code class="literal">+</code> for class methods.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">id</code> </strong></span>
                <code class="literal">)</code></span></dt><dd><p><a id="objectcpr-IDXTERM-91" class="indexterm"/>Indicates that the return type is <strong class="userinput"><code>id</code></strong>. Specifying a return type is
                  optional; the default return type is <strong class="userinput"><code>id</code></strong>.</p></dd><dt><span class="term"><code class="literal">init</code></span></dt><dd><p>The method's name.</p></dd></dl></div></div><div class="sect4" title="One parameter"><div class="titlepage"><div><div><h4 class="title"><a id="objectcpr-CHP-1-SECT-3.5.1.2"/>One parameter</h4></div></div></div><a id="I_1_tt15"/><pre class="programlisting">+(<strong class="userinput"><code>void</code></strong>)setVersion:(<strong class="userinput"><code>int</code></strong>)<em class="replaceable"><code>v</code></em>;</pre><p>This <a id="IXT-1-75" class="indexterm"/>declaration can be broken down as follows:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">+</code></span></dt><dd><p><a id="IXT-1-76" class="indexterm"/> <a id="IXT-1-77" class="indexterm"/>Indicates a class method.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">void</code>
                </strong></span> <code class="literal">)</code></span></dt><dd><p>Indicates that the return type is <strong class="userinput"><code>void</code></strong>.</p></dd><dt><span class="term"><code class="literal">setVersion:</code></span></dt><dd><p>The method name. This method name includes a colon,
                  which indicates a parameter to follow.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">int</code>
                </strong></span> <code class="literal">)</code></span></dt><dd><p>Specifies that the parameter is an <strong class="userinput"><code>int</code></strong>. If you omit the parameter
                  type, it defaults to <strong class="userinput"><code>id</code></strong>.</p></dd><dt><span class="term"><em class="replaceable"><code>v</code></em></span></dt><dd><p>The parameter name. You need the name in both
                  declaration and implementation, although it's only used in
                  the implementation.</p></dd></dl></div></div><div class="sect4" title="More than one parameter"><div class="titlepage"><div><div><h4 class="title"><a id="objectcpr-CHP-1-SECT-3.5.1.3"/>More than one parameter</h4></div></div></div><a id="I_1_tt16"/><pre class="programlisting">-(<strong class="userinput"><code>id</code></strong>)perform:(<strong class="userinput"><code>SEL</code></strong>)<em class="replaceable"><code>sel</code></em> with:(<strong class="userinput"><code>id</code></strong>)<em class="replaceable"><code>obj</code></em>;</pre><p>This <a id="IXT-1-78" class="indexterm"/>declaration can be broken down as follows:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">-</code></span></dt><dd><p>Indicates an instance method.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">id</code> </strong></span>
                <code class="literal">)</code></span></dt><dd><p>Indicates that the return type is <strong class="userinput"><code>id</code></strong>.</p></dd><dt><span class="term"><code class="literal">perform:</code></span></dt><dd><p>The first part of the method name. This method name
                  has two parts, one preceding each of the parameters. The
                  full method name is <code class="literal">perform:with:</code>. Methods with more
                  parameters follow the same pattern as shown here. The
                  second, third, etc. parts of a method name don't need any
                  textual characters, but the colons are required.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">SEL</code>
                </strong></span> <code class="literal">)</code></span></dt><dd><p>Specifies that the first parameter has the type
                  <strong class="userinput"><code>SEL</code></strong>.</p></dd><dt><span class="term"><em class="replaceable"><code>sel</code></em></span></dt><dd><p>The name of the first parameter.</p></dd><dt><span class="term"><code class="literal">with:</code></span></dt><dd><p>The second part of the method name.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">id</code> </strong></span>
                <code class="literal">)</code></span></dt><dd><p>Specifies that the second parameter has the type
                  <strong class="userinput"><code>id</code></strong>.</p></dd><dt><span class="term"><em class="replaceable"><code>obj</code></em></span></dt><dd><p>The name of the second parameter.</p></dd></dl></div></div><div class="sect4" title="A variable number of parameters"><div class="titlepage"><div><div><h4 class="title"><a id="objectcpr-CHP-1-SECT-3.5.1.4"/>A variable number of parameters</h4></div></div></div><a id="I_1_tt17"/><pre class="programlisting">-(<strong class="userinput"><code>id</code></strong>)error:(<strong class="userinput"><code>char</code></strong>*)<em class="replaceable"><code>format</code></em>,...;</pre><p>This <a id="IXT-1-79" class="indexterm"/>declaration can be broken down as follows:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">-</code></span></dt><dd><p>Indicates an instance method.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">id</code> </strong></span>
                <code class="literal">)</code></span></dt><dd><p>Indicates that the return type is <strong class="userinput"><code>id</code></strong>.</p></dd><dt><span class="term"><code class="literal">error:</code></span></dt><dd><p>The entire method name. In this case, the second and
                  subsequent parameters are not prefaced by extensions of the
                  method name.</p></dd><dt><span class="term"><code class="literal">(</code> <span class="bold"><strong> <code class="literal">char*</code>
                </strong></span> <code class="literal">)</code></span></dt><dd><p>Specifies the type of the first parameter.</p></dd><dt><span class="term"><em class="replaceable"><code>format</code></em></span></dt><dd><p>The name of the first parameter.</p></dd><dt><span class="term"><a id="IXT-1-80" class="indexterm"/> <em class="command"/> <code class="literal">...</code></span></dt><dd><p>Represents the variable-size parameter list. Ellipses
                  like these can only appear at the end of a method
                  declaration. In the method, access the list using the
                  <a id="IXTR3-541" class="indexterm"/>standard
                  <a id="IXTR3-542" class="indexterm"/>C <a id="IXTR3-543" class="indexterm"/>variable-arguments
                  <a id="IXTR3-544" class="indexterm"/>interface.</p></dd></dl></div></div></div><div class="sect3" title="Implementing a method"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.2"/>Implementing a method</h3></div></div></div><p>The <a id="IXT-1-81" class="indexterm"/> <a id="IXT-1-82" class="indexterm"/>body of a method appears in the implementation section
          of a class. The method starts with a declaration, identical to that
          of the interface section, and is followed by code surrounded by
          braces. For example:</p><a id="I_1_tt18"/><pre class="programlisting">-(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>scaleBy</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>factor</code></em> {
  <em class="replaceable"><code>radius</code></em> *= <em class="replaceable"><code>factor</code></em>;
}</pre><p>Inside a method body, refer to fields the class declares or
          inherits with no qualification. Refer to fields of other objects
          using the dereference <a id="IXT-1-83" class="indexterm"/> <a id="IXT-1-84" class="indexterm"/>(<code class="literal">-&gt;</code>)
          operator.</p><p>Objective-C defines three special variables inside each
          method:</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong> <code class="literal">self</code> </strong></span></span></dt><dd><p><a id="IXT-1-85" class="indexterm"/>The receiver of the method call.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">super</code> </strong></span></span></dt><dd><p><a id="IXT-1-86" class="indexterm"/>A reference to the inherited version of the
                method, if there is one.</p></dd><dt><span class="term"><code class="literal">_cmd</code></span></dt><dd><p><a id="IXT-1-87" class="indexterm"/>The selector—an integer that uniquely specifies
                the method.</p></dd></dl></div><p><a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.9" title="Predefined Types, Constants, and Variables">Section 1.3.9</a>
          describes these special variables in more detail.</p></div><div class="sect3" title="Calling a method"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.3"/>Calling a method</h3></div></div></div><p>Every <a id="IXT-1-88" class="indexterm"/>method <a id="IXT-1-89" class="indexterm"/>call has a <a id="IXT-1-90" class="indexterm"/>receiver—the object whose method you are calling—and a
          method name. You enclose a method call in brackets <code class="literal">[ ]</code> with the receiver first and the method
          name following. If the method takes parameters, they follow the
          corresponding colons in the components of the method name. Separate
          receiver and name components by spaces. For example:</p><a id="I_1_tt19"/><pre class="programlisting">[<em class="replaceable"><code>aCircle</code></em> 
                  <em class="replaceable"><code>initWithCenter</code></em>:<em class="replaceable"><code>aPoint</code></em> 
                  <em class="replaceable"><code>andRadius</code></em>:42];</pre><p>If a method takes a variable number of parameters, separate
          them with commas:</p><a id="I_1_tt20"/><pre class="programlisting">[<strong class="userinput"><code>self</code></strong> error:"<em class="replaceable"><code>Expected %d but got %d</code></em>", <em class="replaceable"><code>i</code></em>, <em class="replaceable"><code>j</code></em>];</pre><p>A method call is an expression, so if the method returns a
          value you can assign it to a variable:</p><a id="I_1_tt21"/><pre class="programlisting"><strong class="userinput"><code>int</code></strong> 
                  <em class="replaceable"><code>theArea</code></em> = [<em class="replaceable"><code>aCircle</code></em> 
                  <em class="replaceable"><code>area</code></em>];</pre><p>Method calls can be nested:</p><a id="I_1_tt22"/><pre class="programlisting"><em class="replaceable"><code>Circle</code></em>* <em class="replaceable"><code>c1</code></em> = ... // whatever
<em class="replaceable"><code>Circle</code></em>* <em class="replaceable"><code>c2</code></em> = 
  [[<em class="replaceable"><code>Circle</code></em> alloc] <em class="replaceable"><code>initWithCenter</code></em>:[<em class="replaceable"><code>c1</code></em> 
                  <em class="replaceable"><code>center</code></em>]
                  <em class="replaceable"><code>andRadius</code></em>:[<em class="replaceable"><code>c1</code></em> 
                  <em class="replaceable"><code>radius</code></em>]];</pre></div><div class="sect3" title="Naming collisions"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.4"/>Naming collisions</h3></div></div></div><p>When <a id="IXT-1-91" class="indexterm"/> <a id="IXT-1-92" class="indexterm"/>the <a id="IXT-1-93" class="indexterm"/>compiler encodes a method call, it needs to set up,
          then and there, room for the parameters and return value (if any).
          This is a nondynamic aspect of method calls. To encode the call
          properly, the compiler must know the <a id="IXT-1-94" class="indexterm"/>parameter and <a id="IXT-1-95" class="indexterm"/>return types.</p><p>If you leave the type of a <a id="IXT-1-96" class="indexterm"/>receiver unknown (that is, declared as <strong class="userinput"><code>id</code></strong>) until runtime, the name of a method
          may be all the information the compiler has when it compiles the
          method call. The compiler will encode the method call based on
          previous uses of the same method:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>If the compiler has not yet seen any methods with the name
              used, it will assume the return type and parameters are all
              <strong class="userinput"><code>id</code></strong> (a pointer whose size
              is platform-dependent) and will issue a warning message. If you
              use variables of type other than <strong class="userinput"><code>id</code></strong>, the compiler will convert them
              according to standard C rules and they may not survive
              intact.</p></li><li class="listitem"><p>If the compiler has seen exactly one method with the same
              name, it will emit code assuming the return and parameter types
              match those it saw.</p></li><li class="listitem"><p>If the compiler has seen more than one method with the
              same name, and differing return or parameter types, it will not
              know how to encode the method call. It will choose one option
              and issue a warning message. As in the first case, type
              conversions may play havoc with your data values.</p></li></ul></div><p>The compiler will not let you declare, in related classes,
          methods with the same name but different parameter types (no
          C++-style <a id="IXT-1-97" class="indexterm"/> <a id="IXT-1-98" class="indexterm"/>overloading), but you can do this in unrelated
          classes. To avoid forcing the compiler to guess your intentions,
          methods with the same name, even in different classes, should
          usually have the same signature.</p><p>You can relax this restriction if you know the receiver of the
          call will always be statically typed. But you may not have control
          over all future use of your method.</p></div><div class="sect3" title="Private methods"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.5"/>Private methods</h3></div></div></div><p>Because <a id="IXT-1-99" class="indexterm"/> <a id="IXT-1-100" class="indexterm"/>the compiler needs to know parameter types to generate
          method calls, you should also not omit method declarations in an
          attempt to make them private. A better way to make a method private
          is to move the method declaration to its class's implementation
          file, where it will be visible to the code that uses it but not to
          any other part of your program.</p><p>The following example shows how to use a <a id="IXT-1-101" class="indexterm"/> <a id="IXT-1-102" class="indexterm"/>category (described at greater length in <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.6" title="Categories">Section 1.3.6</a>) to declare
          a method in an implementation file:</p><a id="I_1_tt23"/><pre class="programlisting"> 1<strong class="userinput"><code> @interface</code></strong> 
                  <em class="replaceable"><code>Circle</code></em> (<em class="replaceable"><code>PrivateMethods</code></em>)
 2   -(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>top</code></em>;
 3<strong class="userinput"><code> @end</code></strong>
 4
 5<strong class="userinput"><code> @implementation</code></strong> 
                  <em class="replaceable"><code>Circle</code></em>
 6   // Public definitions as before.
 7   ...
 8   // Now implement the private methods.
 9   -(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>top</code></em> { <strong class="userinput"><code>return</code></strong> [<em class="replaceable"><code>center</code></em> 
                  <em class="replaceable"><code>y</code></em>] - <em class="replaceable"><code>radius</code></em>; }
10<strong class="userinput"><code> @end</code></strong></pre><p>Line 1. At the beginning of your class's implementation file,
          declare a category that extends the class.</p><p>Line 2. Methods declared here are just as much part of the
          class as the ones declared in the regular interface, but will be
          visible only in this file.</p><p>Line 5. Your class's implementation, in the usual
          fashion.</p><p>Line 6. <a id="IXT-1-103" class="indexterm"/>Implement the methods declared in the header file.
          They can call the private methods (as well as other public methods,
          of course).</p><p>Line 8. Implement the private methods. They can call public
          and private methods.</p></div><div class="sect3" title="Accessors"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.6"/>Accessors</h3></div></div></div><p>Accessors <a id="IXT-1-104" class="indexterm"/> <a id="IXT-1-105" class="indexterm"/>are methods for setting and returning an object's
          <a id="IXT-1-106" class="indexterm"/>fields. Objective-C has several conventions for
          writing accessors:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>To return a variable, provide a method with the same name
              as the variable. You can do this because methods and fields have
              separate namespaces.</p></li><li class="listitem"><p>To set a variable, provide a method with the same name as
              the variable that takes the new value as a parameter. For
              example, given a variable named <code class="literal">radius</code>, use <code class="literal">radius:(</code> <strong class="userinput"><code>float</code></strong> <code class="literal">)r</code> as the signature for your setter
              method. You can do this because the colon preceding the
              parameter is part of the methods' name, so <code class="literal">radius:</code> the setter will be differently
              named from the <code class="literal">radius</code> the
              getter.</p></li></ul></div><p>Here is an example of how to write accessors for a simple
          field:</p><a id="I_1_tt24"/><pre class="programlisting"><strong class="userinput"><code>@implementation</code></strong> 
                  <em class="replaceable"><code>Circle</code></em>
  -(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>radius</code></em> { <strong class="userinput"><code>return</code></strong> 
                  <em class="replaceable"><code>radius</code></em>; }
  -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>radius</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>r</code></em> { <em class="replaceable"><code>radius</code></em> = <em class="replaceable"><code>r</code></em>; }
<strong class="userinput"><code>@end</code></strong></pre><div class="note" title="Note"><h3 class="title"><a id="ch01-14-fm2xml"/>Note</h3><p>Don't use "get" in the name of your accessors. By
            convention, methods whose names start with "get" take an address
            into which data will be copied.</p></div><p>If you are using reference counting, there are more design
          patterns you should follow when writing accessors. These are
          discussed in <a class="link" href="ch01s12.html#objectcpr-CHP-1-SECT-12.2" title="Reference Counting">Section
          1.12.2</a>.</p></div><div class="sect3" title="Message search paths"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.7"/>Message search paths</h3></div></div></div><p>When <a id="IXT-1-107" class="indexterm"/>you send an object a <a id="IXT-1-108" class="indexterm"/>message (call one of its methods), the code that
          actually runs is determined by a search performed at runtime.</p><p>The dispatch of the method call proceeds as follows:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>The runtime system examines the object at the actual time
              the message is sent and determines the object's class.</p></li><li class="listitem"><p>If that class has an instance method with the same name,
              the method executes.</p></li><li class="listitem"><p>If the class does not have such a method, the same search
              takes place in the parent class.</p></li><li class="listitem"><p>The search proceeds up the inheritance tree to the root
              class. If a method with a matching name is found, that method
              executes.</p></li><li class="listitem"><p>If there is no matching method but the receiver has a
              forwarding method, the runtime system calls the forwarding
              method. (See <a class="link" href="ch01s11.html" title="Forwarding Messages">Section
              1.11</a>.) Default forwarding behavior is to exit the
              program.</p></li><li class="listitem"><p>If there are no <a id="IXT-1-109" class="indexterm"/>forwarding methods, the program normally exits
              with an error. <a class="link" href="ch01s09.html" title="Runtime Environment">Section
              1.9</a> describes how to change this.</p></li></ol></div><p><a class="link" href="ch01s09.html" title="Runtime Environment">Section 1.9</a>
          provides more details about method dispatch.</p></div><div class="sect3" title="Special receivers"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.8"/>Special receivers</h3></div></div></div><p>The <a id="objectcpr-IDXTERM-130" class="indexterm"/> <a id="objectcpr-IDXTERM-131" class="indexterm"/> <a id="objectcpr-IDXTERM-132" class="indexterm"/>receiver <a id="IXT-1-110" class="indexterm"/>is the object to which you are sending a message. Its
          <a id="IXT-1-111" class="indexterm"/>instance methods will be given the first chance to
          handle the call, followed by the instance methods of its ancestor
          classes.</p><p>Besides the typical case of sending a message to a named
          receiver, there are several special targets:</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong> <code class="literal">self</code> </strong></span></span></dt><dd><p><a id="IXT-1-112" class="indexterm"/>Refers to the object that is executing the
                current method. At runtime, the class of <strong class="userinput"><code>self</code></strong> may be the class in which the
                call to <strong class="userinput"><code>self</code></strong> appears,
                or it may be a subclass.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">super</code> </strong></span></span></dt><dd><p><a id="IXT-1-113" class="indexterm"/>Refers to the inherited version of the
                method.</p><p>When you use the predefined variable <strong class="userinput"><code>super</code></strong> as the receiver, you are
                sending a message to <strong class="userinput"><code>self</code></strong> but instructing the runtime
                to start method lookup in the <a id="IXT-1-114" class="indexterm"/>parent class of the class in which the send
                occurs.</p><p>This is not the same as starting in the parent class of
                the receiver—the class of <strong class="userinput"><code>super</code></strong> is determined at compile
                time. If this were done dynamically, the following code would
                cause an infinite loop:</p><a id="I_1_tt25"/><pre class="programlisting">1<strong class="userinput"><code>@implementation</code></strong> 
                           <em class="replaceable"><code>C</code></em>
2   -(<strong class="userinput"><code>void</code></strong>) <em class="replaceable"><code>f</code></em> { [<strong class="userinput"><code>super</code></strong> 
                           <em class="replaceable"><code>f</code></em>]; }
3 <strong class="userinput"><code>@end</code></strong>
4
5 // And elsewhere:
6 <em class="replaceable"><code>D</code></em>* <em class="replaceable"><code>d</code></em> = [<em class="replaceable"><code>D</code></em> new];
7 // D inherits from C, does not override f.
8 [<em class="replaceable"><code>d</code></em> 
                           <em class="replaceable"><code>f</code></em>];  // Executes in C's version.</pre><p>Here, <em class="replaceable"><code>D</code></em> is a subclass of
                <em class="replaceable"><code>C</code></em> that does not override
                <em class="replaceable"><code>f.</code></em> The call at line 8 would
                dispatch to line 2, but the call to <strong class="userinput"><code>super</code></strong> would be redirected to the
                parent class (<em class="replaceable"><code>C</code></em>) of the receiver
                (<em class="replaceable"><code>D</code></em>)—i.e., back to line 2.</p></dd><dt><span class="term"><span class="emphasis"><em>Any class name</em></span></span></dt><dd><p><a id="IXT-1-115" class="indexterm"/>Refers to the class object that represents the
                named class. When you call a class method you are actually
                sending a message to a class object. (See <a class="link" href="ch01s09.html" title="Runtime Environment">Section 1.9</a>.) If you
                don't have the class object on hand, this syntax lets you use
                the class's name as the receiver.</p></dd><dt><span class="term"><strong class="userinput"><code>nil</code></strong></span></dt><dd><p><a id="IXT-1-116" class="indexterm"/> <a id="IXT-1-117" class="indexterm"/>It is not an error to send a message to
                <strong class="userinput"><code>nil</code></strong> (an uninitialized
                or cleared object). If the message has no return value
                (<strong class="userinput"><code>void</code></strong>), nothing will
                happen. If the message returns an object pointer, it will
                return <strong class="userinput"><code>nil</code></strong>. If the
                message returns a scalar value such as an <strong class="userinput"><code>int</code></strong> or <strong class="userinput"><code>float</code></strong>, it will return zero. If the
                message returns a <strong class="userinput"><code>struct</code></strong>, <strong class="userinput"><code>union</code></strong>, or other compound value,
                its return value is not specified and you should not depend on
                it. This behavior makes it easier to chain together <a id="IXT-1-118" class="indexterm"/>method calls. For example:</p><a id="I_1_tt26"/><pre class="programlisting"><strong class="userinput"><code>id</code></strong> 
                           <em class="replaceable"><code>widget</code></em> = [[[<em class="replaceable"><code>window</code></em> 
                           <em class="replaceable"><code>child</code></em>] <em class="replaceable"><code>toolbar</code></em>] <em class="replaceable"><code>widget</code></em>];</pre><p>If sending a message to <strong class="userinput"><code>nil</code></strong> caused a <a id="IXT-1-119" class="indexterm"/>runtime error, you would have to check the
                result of each message. This property of <strong class="userinput"><code>nil</code></strong> should not tempt you to be lax
                with your runtime checking, but it may suffice to test only
                the end result of a chain of method <a id="IXTR3-545" class="indexterm"/> <a id="IXTR3-546" class="indexterm"/> <a id="IXTR3-547" class="indexterm"/>calls.</p></dd></dl></div></div><div class="sect3" title="Selectors"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.5.9"/>Selectors</h3></div></div></div><p>Objective-C <a id="IXT-1-120" class="indexterm"/> <a id="IXT-1-121" class="indexterm"/>methods are distinguished by their names, which are
          the concatenation of the component parts of the method name,
          including the colon characters. At compile time, each name is
          matched to a unique integer called the
          <span class="emphasis"><em>selector</em></span>. The Objective-C type <strong class="userinput"><code>SEL</code></strong> <a id="IXT-1-122" class="indexterm"/> represents a selector's type.</p><p>When a method call is compiled, it is distilled to its
          <a id="IXT-1-123" class="indexterm"/>receiver, selector, and parameters. At runtime, the
          message is dispatched by matching the selector with a list
          maintained by the receiver's class object.</p><p>You can use selectors to make a runtime decision about what
          method to call—the Objective-C version of function or method
          pointers.</p><a id="I_1_tt27"/><pre class="programlisting">1<strong class="userinput"><code>SEL</code></strong> 
                  <em class="replaceable"><code>mySel</code></em> = <strong class="userinput"><code>@selector</code></strong>(<em class="replaceable"><code>center</code></em>);
2 <em class="replaceable"><code>Point</code></em>* <em class="replaceable"><code>p</code></em> = [<em class="replaceable"><code>aCircle</code></em> perform:<em class="replaceable"><code>mySel</code></em>];</pre><p>Line 1. The compiler knows the mapping from selector names to
          <strong class="userinput"><code>SEL</code></strong>s and will emit code
          assigning to <em class="replaceable"><code>mySel</code></em> the value
          corresponding to the method name
          <em class="replaceable"><code>center</code></em>.</p><p>Line 2. Using the selector, you can instruct the receiver to
          respond to the message as if it had been sent in the usual way. The
          effect is the same as executing the direct method call:</p><a id="I_1_tt28"/><pre class="programlisting"><em class="replaceable"><code>Point</code></em>* <em class="replaceable"><code>p</code></em> = [<em class="replaceable"><code>aCircle</code></em> 
                  <em class="replaceable"><code>center</code></em>];</pre><p><a class="link" href="ch01s10.html" title="Root Classes">Section 1.10</a>
          gives more information about the <code class="literal">-perform</code>: <a id="IXTR3-548" class="indexterm"/>methods.</p></div></div><div class="sect2" title="Categories"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.6"/>Categories</h2></div></div></div><p>Objective-C <a id="objectcpr-IDXTERM-151" class="indexterm"/> <a id="objectcpr-IDXTERM-152" class="indexterm"/>provides the category construct for modifying an
        existing class "in place." This differs from writing a new <a id="IXT-1-124" class="indexterm"/>subclass: with inheritance you can only create a new
        leaf in the inheritance tree; categories let you modify interior nodes
        in the tree.</p><p>With a category, the full declaration of a class can be spread
        out over multiple files and compiled at different times. This has
        several advantages:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>You can partition a class into groups of related methods and
            keep the groups separate.</p></li><li class="listitem"><p>Different programmers can more easily work on different
            parts of the class.</p></li><li class="listitem"><p>For diverse applications, you can provide only those parts
            of the class that are needed. This gives you finer-grained control
            over expressing dependencies without having to provide different
            versions of the class.</p></li><li class="listitem"><p>You can add methods to classes from the operating system's
            library or from third-party sources without having to subclass
            them.</p></li></ul></div><div class="sect3" title="Declaring a category"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.6.1"/>Declaring a category</h3></div></div></div><p>Here is an example of declaring a <a id="IXT-1-125" class="indexterm"/> <a id="IXT-1-126" class="indexterm"/>category to add methods to the <code class="literal">Circle</code> class:</p><a id="I_1_tt29"/><pre class="programlisting">1<strong class="userinput"><code>#import</code></strong> "<em class="replaceable"><code>Circle.h</code></em>"
2
3 <strong class="userinput"><code>@interface</code></strong> 
                  <em class="replaceable"><code>Circle</code></em> (<em class="replaceable"><code>Motion</code></em>)
4   // No field section.
5   -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>moveRight</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>dx</code></em>;
6   -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>moveUp</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>dy</code></em>;
7 <strong class="userinput"><code>@end</code></strong></pre><p>Line 1. The declaration can be in the same header file as the
          declaration of the <a id="IXT-1-127" class="indexterm"/> <a id="IXT-1-128" class="indexterm"/>class it modifies, or in a separate file. If it is in
          a separate header file, you may need to include the header file of
          the modified class.</p><p>Line 3. Declare the name of the class you are modifying and
          the name of your category. In this example,
          <em class="replaceable"><code>Circle</code></em> is the class name, and
          <em class="replaceable"><code>Motion</code></em> is the category name. Category
          names have their own namespace, so a category can have the same name
          as a class or a protocol.</p><p>Line 4. There is no fields section in the category
          declaration, so you can't use a category to add fields to a
          class.</p><p>Lines 5, 6. Declare methods here as in a class
          interface.</p><p>Line 7. No semicolon after the <strong class="userinput"><code>@end</code></strong> keyword.</p><p>You can declare a category in a header or an implementation
          file. If the declaration is in a <a id="IXT-1-129" class="indexterm"/>header file, its methods are full members of the
          modified class. Any code can use the new methods with the modified
          class (and its subclasses). If the declaration is in an
          implementation file, only code in that file can use the new methods,
          and their implementation must appear in that file. This is a way of
          making methods private.</p><p>If you declare in your category a method with the same name as
          one in the modified class, the new method <a id="IXT-1-130" class="indexterm"/>overrides the old one. When such an overriding method
          sends messages to <strong class="userinput"><code>super</code></strong>, they
          go to the same method in the parent class (just as they would in the
          overridden version) and not to the overridden method itself. You
          can't send messages to the overridden version. You should simply
          avoid using categories to override methods.</p><p>If several categories that modify the same class all declare a
          method with the same name, the results are implementation dependent.
          In other words, don't do this. The <em class="filename">gcc</em> compiler does not warn you about
          this.</p><p>You don't have to implement all or even any of the methods you
          declare in a category. The compiler will warn you if you have an
          implementation section for your category and omit any methods. If
          you have no implementation at all for a category, this is called
          declaring an informal protocol. <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.7" title="Protocols">Section 1.3.7</a> discusses
          these further.</p></div><div class="sect3" title="Implementing a category"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.6.2"/>Implementing a category</h3></div></div></div><p>You <a id="IXT-1-131" class="indexterm"/> <a id="IXT-1-132" class="indexterm"/>implement the methods of the category in an
          implementation file, like this:</p><a id="I_1_tt30"/><pre class="programlisting">1<strong class="userinput"><code>#import</code></strong> "<em class="replaceable"><code>Motion.h</code></em>"
2
3 <strong class="userinput"><code>@implementation</code></strong> 
                  <em class="replaceable"><code>Circle</code></em> (<em class="replaceable"><code>Motion</code></em>)
4   -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>moveRight</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>dx</code></em> { ... }
5   -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>moveUp</code></em>:(<strong class="userinput"><code>float</code></strong>)<em class="replaceable"><code>dy</code></em> { ... }
6 <strong class="userinput"><code>@end</code></strong></pre><p>Line 1. You need to include the declaration of the category
          you are implementing. If the declaration is in the same file as the
          implementation, you don't need this line.</p><p>Line 3. Specify the name of the modified class and the name of
          your category.</p><p>Line 4. Methods take the same form and have the same access to
          fields as in a regular class implementation.</p><p>Line 5. No semicolon after the <strong class="userinput"><code>@end</code></strong> <a id="IXTR3-549" class="indexterm"/> <a id="IXTR3-550" class="indexterm"/>keyword.</p></div></div><div class="sect2" title="Protocols"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.7"/>Protocols</h2></div></div></div><p>Protocols <a id="objectcpr-IDXTERM-164" class="indexterm"/>are lists of method declarations that are not associated
        with a specific class declaration. Protocols let you express that
        unrelated classes share a common set of method declarations. (This
        facility inspired Java's interface construct.) Protocols let you do
        the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Use static type checking where you want it</p></li><li class="listitem"><p>Specify interfaces to other code</p></li><li class="listitem"><p>Factor common features of your class hierarchy</p></li></ul></div><p>Objective-C declarations can specify that an instance must
        support a protocol, instead of (or in addition to) conforming to a
        class. (See <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.8" title="Declarations">Section
        1.3.8</a>.)</p><div class="sect3" title="Declaring a protocol"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.7.1"/>Declaring a protocol</h3></div></div></div><p>You <a id="IXT-1-133" class="indexterm"/> <a id="IXT-1-134" class="indexterm"/>declare a protocol in a header file like this:</p><a id="I_1_tt31"/><pre class="programlisting">1<strong class="userinput"><code> @protocol</code></strong> 
                  <em class="replaceable"><code>AnotherProtocol</code></em>;
2
3<strong class="userinput"><code> @protocol</code></strong> 
                  <em class="replaceable"><code>Printable</code></em> &lt;<em class="replaceable"><code>Drawable</code></em>&gt;
4   -(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>print</code></em>;
5 <strong class="userinput"><code>@end</code></strong></pre><p>Line 1. You need the forward protocol declaration if return or
          parameter types of methods in your protocol use the other
          protocol.</p><p>Protocol names have their own namespace, so a protocol can
          have the same name as a class or a category.</p><p>Line 3. If your protocol extends other protocols, name those
          in the protocol list. The list is a sequence of protocol names,
          separated by commas. If the list is empty, you can omit the angle
          brackets. You don't need to redeclare the methods of the listed
          protocols. When a class adopts the protocol you are declaring, it
          must implement all the methods declared in your protocol and all the
          other protocols in the list. (You can't write partially abstract
          classes as in C++, with some methods declared but not
          implemented.)</p><p>Line 4. You declare your methods here in the same form as in a
          class interface.</p><p>Line 5. No semicolon after the <strong class="userinput"><code>@end</code></strong> keyword.</p></div><div class="sect3" title="Adopting a protocol"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.7.2"/>Adopting a protocol</h3></div></div></div><p>When <a id="IXT-1-135" class="indexterm"/> <a id="IXT-1-136" class="indexterm"/>you want your class to adopt (implement) one or more
          protocols, you declare it like this:</p><a id="I_1_tt32"/><pre class="programlisting"><strong class="userinput"><code>#import</code></strong> "<em class="replaceable"><code>Printable.h</code></em>"
<strong class="userinput"><code>@interface</code></strong> 
                  <em class="replaceable"><code>Circle</code></em> : <em class="replaceable"><code>Graphic</code></em> &lt;<em class="replaceable"><code>Printable</code></em>&gt;</pre><p>When you want your category to adopt a protocol you declare it
          like this:</p><a id="I_1_tt33"/><pre class="programlisting"><strong class="userinput"><code>#import</code></strong> "<em class="replaceable"><code>Printable.h</code></em>"
<strong class="userinput"><code>@interface</code></strong> 
                  <em class="replaceable"><code>Circle</code></em> (<em class="replaceable"><code>Motion</code></em>) &lt;<em class="replaceable"><code>Printable</code></em>&gt;</pre><p>The list of protocols, inside the angle brackets, consists of
          names separated by commas. You have to import the header files where
          the protocols are declared. Don't redeclare the protocol's methods
          in your interface; just define them in your implementation. You have
          to define all the methods of the protocol.</p><p>When you declare a field or variable, you can specify that it
          represents an instance whose class conforms to a specific protocol
          like this:</p><a id="I_1_tt34"/><pre class="programlisting"><strong class="userinput"><code>id</code></strong> &lt;<em class="replaceable"><code>Printable</code></em>&gt; <em class="replaceable"><code>obj</code></em>;
<em class="replaceable"><code>ClassName</code></em> &lt;<em class="replaceable"><code>Printable</code></em>&gt;* <em class="replaceable"><code>obj</code></em>;</pre><p>For more about this, see <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.8" title="Declarations">Section 1.3.8</a>.</p></div><div class="sect3" title="Checking for conformity to a protocol"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.7.3"/>Checking for conformity to a protocol</h3></div></div></div><p>At <a id="IXT-1-137" class="indexterm"/>runtime, you can check if an object's class conforms
          to a protocol by using the <code class="literal">-conformsTo</code> <a id="IXT-1-138" class="indexterm"/>: (from the root class <code class="literal">Object</code>) or <code class="literal">+conformsToProtocol</code> <a id="IXT-1-139" class="indexterm"/>: (from <code class="literal">NSObject</code>)
          methods:</p><a id="I_1_tt35"/><pre class="programlisting">[<em class="replaceable"><code>obj</code></em> conformsTo:<strong class="userinput"><code>@protocol</code></strong>(<em class="replaceable"><code>Printable</code></em>)];</pre><p>Like classes, protocols have special runtime structures
          associated with them called <span class="emphasis"><em>protocol objects</em></span>
          <a id="IXT-1-140" class="indexterm"/>. <a class="link" href="ch01s09.html" title="Runtime Environment">Section
          1.9</a> describes these.</p></div><div class="sect3" title="Informal protocols"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.7.4"/>Informal protocols</h3></div></div></div><p>You can get some of the functionality of a protocol by
          declaring but not implementing a category. Such a category is called
          an <span class="emphasis"><em>informal protocol</em></span> <a id="IXT-1-141" class="indexterm"/> <a id="IXT-1-142" class="indexterm"/>. You can't declare that a class does or does not
          implement an informal protocol, so you can't use it for static type
          checking. You can use an informal protocol to specify a group of
          methods that all subclasses of the modified class
          <span class="emphasis"><em>may</em></span> implement, but are not obliged to
          implement. This serves as something less than a full protocol but
          more than just textual documentation. If you need a protocol, you're
          better off using a formal protocol.</p><p>When a subclass implements an informal protocol, it doesn't
          refer to the original declaration, but declares in its interface
          which of the methods it will implement and defines the methods in
          its implementation in the usual <a id="IXTR3-551" class="indexterm"/>way.</p></div></div><div class="sect2" title="Declarations"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.8"/>Declarations</h2></div></div></div><p>You <a id="objectcpr-IDXTERM-176" class="indexterm"/>can declare Objective-C objects in many different ways.
        However, the way in which you declare an object has no effect on that
        object's runtime behavior. Rather, the way that you declare an object
        controls how the compiler checks your program for type safety.</p><div class="sect3" title="Dynamic typing"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.8.1"/>Dynamic typing</h3></div></div></div><p>Use <a id="IXT-1-143" class="indexterm"/> <a id="IXT-1-144" class="indexterm"/> <a id="IXT-1-145" class="indexterm"/>the <strong class="userinput"><code>id</code></strong>
          <a id="IXT-1-146" class="indexterm"/> type to declare a pointer to an unspecified kind of
          object. This is called <span class="emphasis"><em>dynamic typing</em></span>. For
          example:</p><a id="I_1_tt36"/><pre class="programlisting"><strong class="userinput"><code>id</code></strong> 
                  <em class="replaceable"><code>obj</code></em>;</pre><p>With this declaration, <em class="replaceable"><code>obj</code></em> can be a
          pointer to an object of any type. An <strong class="userinput"><code>id</code></strong> has the following compile-time
          properties:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>You can send any kind of message to an <strong class="userinput"><code>id</code></strong>. (The compiler will warn you if
              the method name is unknown or ambiguous; see <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.5.4" title="Naming collisions">Section 1.3.5.4</a>.) If
              at runtime the object does not have an appropriate method or
              delegate (see <a class="link" href="ch01s11.html" title="Forwarding Messages">Section
              1.11</a>), a <a id="IXT-1-147" class="indexterm"/>runtime error will occur (see <a class="link" href="ch01s08.html" title="Runtime Errors">Section 1.8</a>).</p></li><li class="listitem"><p>You can assign any other object to an <strong class="userinput"><code>id</code></strong>.</p></li><li class="listitem"><p>You can assign an <strong class="userinput"><code>id</code></strong> to any object. The compiler will
              not remind you that this can be dangerous. Using an <strong class="userinput"><code>id</code></strong> in this way means you assume the
              risk of assigning an object to an incompatible variable.</p></li></ul></div></div><div class="sect3" title="Static typing"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.8.2"/>Static typing</h3></div></div></div><p>In <a id="objectcpr-IDXTERM-182" class="indexterm"/> <a id="objectcpr-IDXTERM-183" class="indexterm"/>Objective-C, any deviation from fully dynamic typing
          is called <span class="emphasis"><em>static typing</em></span>. With static typing you
          instruct the compiler about the types of values you intend variables
          to have. All static typing is done within the inheritance relation:
          where a variable's class or protocol is declared, a value from a
          descendant class or protocol is always acceptable.</p><p>You can use <a id="IXT-1-148" class="indexterm"/>static typing in three ways, shown in the following
          examples:</p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>MyClass</code></em> <code class="literal">*</code>
              <em class="replaceable"><code>obj</code></em></span></dt><dd><p>Declares <em class="replaceable"><code>obj</code></em> to be an
                instance of <em class="replaceable"><code>MyClass</code></em> or one of its
                descendants. This is called static typing. Declaring
                <em class="replaceable"><code>obj</code></em> this way has the following
                compile-time effects:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>You can assign <em class="replaceable"><code>obj</code></em> to any
                    variable of type <strong class="userinput"><code>id</code></strong>.</p></li><li class="listitem"><p>You can assign any variable of type <strong class="userinput"><code>id</code></strong> to
                    <em class="replaceable"><code>obj</code></em>.</p></li><li class="listitem"><p>You can assign <em class="replaceable"><code>obj</code></em> to any
                    variable whose declared type is
                    <em class="replaceable"><code>MyClass</code></em> or one of its
                    ancestors.</p></li><li class="listitem"><p>You can assign to <em class="replaceable"><code>obj</code></em> any
                    variable whose declared type is
                    <em class="replaceable"><code>MyClass</code></em> or one of its
                    descendants.</p></li><li class="listitem"><p>The compiler will warn you if you assign
                    <em class="replaceable"><code>obj</code></em> or assign to it in a way
                    not covered in the previous cases. A cast will quiet the
                    compiler but will not prevent an incompatible assignment
                    at runtime.</p></li><li class="listitem"><p>You can send to <em class="replaceable"><code>obj</code></em> any
                    message that <em class="replaceable"><code>MyClass</code></em> or one of
                    its parent classes declares.</p></li></ul></div></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">id</code> </strong></span> <code class="literal">&lt;</code>
              <em class="replaceable"><code>ProtocolList</code></em> <code class="literal">&gt;</code>
              <em class="replaceable"><code>obj</code></em></span></dt><dd><p>Does not constrain the class of
                <em class="replaceable"><code>obj</code></em>, but declares that it conforms
                to the specified protocols. The protocol list consists of
                protocol names separated by commas. This declaration has the
                following compile-time effects:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>You can assign <em class="replaceable"><code>obj</code></em> to an
                    object that does not conform to the protocol.</p></li><li class="listitem"><p>Assigning <em class="replaceable"><code>obj</code></em> an object
                    that is not declared to conform will trigger a compiler
                    warning.</p></li><li class="listitem"><p>Sending to <em class="replaceable"><code>obj</code></em> a message
                    not included in the protocol will trigger a compiler
                    warning.</p></li></ul></div></dd><dt><span class="term"><em class="replaceable"><code>MyClass</code></em> <code class="literal">&lt;</code>
              <em class="replaceable"><code>ProtocolList</code></em> <code class="literal">&gt;*</code>
              <em class="replaceable"><code>obj</code></em></span></dt><dd><p>Declares that <em class="replaceable"><code>obj</code></em> is an
                instance of <em class="replaceable"><code>MyClass</code></em> or one of its
                descendants, and that it conforms to the listed protocols. The
                compile-time effects of this declaration are the combination
                of the effects of the preceding two styles of
                declaration.</p></dd></dl></div><div class="note" title="Note"><h3 class="title"><a id="ch01-15-fm2xml"/>Note</h3><p>Due to a compiler bug,<em class="filename">
            gcc</em> does not always correctly use the declared protocol
            for type <a id="IXTR3-552" class="indexterm"/> <a id="IXTR3-553" class="indexterm"/>checking.</p></div></div><div class="sect3" title="Type qualifiers"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.8.3"/>Type qualifiers</h3></div></div></div><p><a id="IXT-1-149" class="indexterm"/>Type <a id="IXT-1-150" class="indexterm"/> <a id="IXT-1-151" class="indexterm"/> <a id="IXT-1-152" class="indexterm"/>qualifiers go before a C or Objective-C type in a
          method declaration, and modify that type. Supported qualifiers
          are:</p><table border="0" summary="Simple list" class="simplelist"><tr><td><strong class="userinput"><code>in oneway</code></strong>
            <a id="IXT-1-153" class="indexterm"/> <a id="IXT-1-154" class="indexterm"/></td></tr><tr><td><strong class="userinput"><code>out bycopy</code></strong>
            <a id="IXT-1-155" class="indexterm"/> <a id="IXT-1-156" class="indexterm"/></td></tr><tr><td><strong class="userinput"><code>inout byref</code></strong>
            <a id="IXT-1-157" class="indexterm"/> <a id="IXT-1-158" class="indexterm"/></td></tr></table><p>These qualifiers can only be used in formal protocols and
          implementations, not in class or category declarations. They specify
          how parameters are to be passed when you are using remote messaging.
          Type qualifiers can be combined, although not all combinations make
          sense. They are discussed at greater length in <a class="link" href="ch01s06.html" title="Remote Messaging">Section 1.6</a> <a id="IXTR3-554" class="indexterm"/>.</p></div></div><div class="sect2" title="Predefined Types, Constants, and Variables"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-3.9"/>Predefined Types, Constants, and Variables</h2></div></div></div><p>Objective-C adds the special type <strong class="userinput"><code>id</code></strong>, which is generic like a <strong class="userinput"><code>void</code></strong> <code class="literal">*</code>
        in C++, but which does not preclude you from sending messages. In
        addition, the Objective-C environment provides some C types,
        constants, and variables to support object-oriented
        programming.</p><div class="sect3" title="Types"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.9.1"/>Types</h3></div></div></div><p>Along <a id="IXT-1-159" class="indexterm"/> <a id="IXT-1-160" class="indexterm"/>with class types that you define, Objective-C
          introduces these built-in types you can use when declaring
          variables:</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong> <code class="literal">id</code> </strong></span></span></dt><dd><p><a id="IXT-1-161" class="indexterm"/>A generic Objective-C object pointer type. You
                can send any message to the variables of this type without
                compiler warnings. (See <a class="link" href="ch01s03.html#objectcpr-CHP-1-SECT-3.8" title="Declarations">Section 1.3.8</a>.) At
                runtime the receiver may handle the message, delegate it, or
                explicitly ignore it. If it does none of these, a runtime
                exception occurs. (See <a class="link" href="ch01s08.html" title="Runtime Errors">Section 1.8</a>.)
                Unspecified method return or parameter types default to
                <strong class="userinput"><code>id</code></strong>.</p><p>The name <strong class="userinput"><code>id</code></strong> is a
                C typedef for a pointer to a structure with one member: a
                field that points to a class object. <a class="link" href="ch01s09.html" title="Runtime Environment">Section 1.9</a> discusses
                this at greater length.</p></dd><dt><span class="term"><code class="literal">Class</code></span></dt><dd><p><a id="IXT-1-162" class="indexterm"/>A pure C type: a pointer to an Objective-C class
                structure. The runtime system contains a structure for each
                Objective-C class in your program's code. Calling the <code class="literal">-class</code> method of any object returns
                a value of this type.</p></dd><dt><span class="term"><code class="literal">MetaClass</code></span></dt><dd><p><a id="IXT-1-163" class="indexterm"/>Provided in the GNU runtime but not in Darwin,
                this is identical to <code class="literal">Class</code>.
                It's used for clarity when operating with metaclass
                objects.</p></dd><dt><span class="term"><code class="literal">Protocol</code></span></dt><dd><p><a id="IXT-1-164" class="indexterm"/>An Objective-C class. The runtime system
                contains an instance for each Objective-C protocol that is
                either adopted by a class in your program's code or referred
                to in an <strong class="userinput"><code>@protocol</code></strong>
                <a id="IXT-1-165" class="indexterm"/> declaration directive. You can construct a
                <code class="literal">Protocol</code> instance from its
                name using the <strong class="userinput"><code>@protocol</code></strong> directive with a
                parameter.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">BOOL</code> </strong></span></span></dt><dd><p><a id="IXT-1-166" class="indexterm"/>A logical type whose variables have two possible
                values: <strong class="userinput"><code>YES</code></strong> and
                <strong class="userinput"><code>NO</code></strong>. The name <strong class="userinput"><code>BOOL</code></strong> is a typedef for the C type
                <strong class="userinput"><code>char</code></strong>.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">SEL</code> </strong></span></span></dt><dd><p><a id="IXT-1-167" class="indexterm"/> <a id="IXT-1-168" class="indexterm"/>A unique specifier for a method selector. Often
                implemented as a pointer to the method's name, but you should
                treat it as an opaque handle. You can construct a selector
                from a method name using the <strong class="userinput"><code>@selector</code></strong> <a id="IXT-1-169" class="indexterm"/> directive.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">IMP</code> </strong></span></span></dt><dd><p><a id="IXT-1-170" class="indexterm"/> <a id="IXT-1-171" class="indexterm"/>A pointer to the implementation of a method that
                returns an <strong class="userinput"><code>id</code></strong>. More
                precisely, an <strong class="userinput"><code>IMP</code></strong> is
                defined this way:</p><a id="I_1_tt37"/><pre class="programlisting"><strong class="userinput"><code>typedef</code></strong> 
                           <strong class="userinput"><code>id</code></strong> (*<strong class="userinput"><code>IMP</code></strong>)(<strong class="userinput"><code>id</code></strong>, <strong class="userinput"><code>SEL</code></strong>, ...)</pre><p>The first two parameters are the receiver and selector
                values that are passed to any method; the remaining
                variable-length argument list holds the method's visible
                parameters.</p><p>You can construct an <strong class="userinput"><code>IMP</code></strong> from a message selector using
                methods of the root classes <code class="literal">Object</code> or <code class="literal">NSObject</code>. Calling a method through
                its <strong class="userinput"><code>IMP</code></strong> is considerably
                faster than using regular dispatch, but may not work correctly
                if the method does not return an <strong class="userinput"><code>id</code></strong>. <a class="link" href="ch01s15.html" title="Optimizing Method Calls">Section 1.15</a> gives an
                example.</p></dd></dl></div></div><div class="sect3" title="Constants"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.9.2"/>Constants</h3></div></div></div><p>The <a id="IXT-1-172" class="indexterm"/> <a id="IXT-1-173" class="indexterm"/>following constants are all defined as preprocessor
          symbols:</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong> <code class="literal">nil</code> </strong></span></span></dt><dd><p><a id="IXT-1-174" class="indexterm"/>A value describing an uninitialized or invalid
                <strong class="userinput"><code>id</code></strong>. Defined to be
                zero.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">Nil</code> </strong></span></span></dt><dd><p><a id="IXT-1-175" class="indexterm"/>A value describing an uninitialized or invalid
                <code class="literal">Class</code> variable. Defined to
                be zero.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">YES</code> </strong></span></span></dt><dd><p><a id="IXT-1-176" class="indexterm"/>A value of <strong class="userinput"><code>BOOL</code></strong> type, describing a true
                state. Defined to be one.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">NO</code> </strong></span></span></dt><dd><p><a id="IXT-1-177" class="indexterm"/>A value of <strong class="userinput"><code>BOOL</code></strong> type, describing a false
                state. Defined to be zero.</p></dd></dl></div></div><div class="sect3" title="Variables"><div class="titlepage"><div><div><h3 class="title"><a id="objectcpr-CHP-1-SECT-3.9.3"/>Variables</h3></div></div></div><p>These <a id="IXT-1-178" class="indexterm"/>are special variables, set up for you by the
          Objective-C runtime:</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong> <code class="literal">self</code> </strong></span></span></dt><dd><p><a id="IXT-1-179" class="indexterm"/>Inside an <a id="IXT-1-180" class="indexterm"/>instance method, this variable refers to the
                receiver of the message that invoked the method.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">super</code> </strong></span></span></dt><dd><p><a id="IXT-1-181" class="indexterm"/>Not <a id="IXT-1-182" class="indexterm"/>really a variable, but it looks enough like one
                to be included in this list. Inside a method, if you send a
                message to <strong class="userinput"><code>super</code></strong>,
                method dispatch will start looking in the parent class of the
                method's class. That is, <strong class="userinput"><code>super</code></strong> represents the static
                parent, not the parent at runtime.</p></dd><dt><span class="term"><code class="literal">_cmd</code></span></dt><dd><p><a id="IXT-1-183" class="indexterm"/>A variable of type <strong class="userinput"><code>SEL</code></strong>, available inside any
                Objective-C method, and describing the selector of the
                method.</p></dd><dt><span class="term"><code class="literal">isa</code></span></dt><dd><p><a id="IXT-1-184" class="indexterm"/>This is a protected field of all Objective-C
                objects. You do have access to it, although it's better to get
                it from the <code class="literal">class</code>
                <a id="IXT-1-185" class="indexterm"/> method:</p><a id="I_1_tt38"/><pre class="programlisting">Class<em class="replaceable"><code>C</code></em> = <em class="replaceable"><code>obj</code></em>-&gt;isa;     // Discouraged.
Class <em class="replaceable"><code>C</code></em> = [<em class="replaceable"><code>obj</code></em> class];  // Better.</pre><p><code class="literal">isa</code> points to the
                class object representing the <a id="IXTR3-555" class="indexterm"/> <a id="IXTR3-556" class="indexterm"/>object's
                class.</p></dd></dl></div></div></div></div></body></html>
