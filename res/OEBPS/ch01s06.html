<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Remote Messaging</title><link rel="stylesheet" href="core.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"/></head><body><div class="sect1" title="Remote Messaging"><div class="titlepage"><div><div><h1 class="title"><a id="objectcpr-CHP-1-SECT-6"/>Remote Messaging</h1></div></div></div><p><a id="objectcpr-IDXTERM-274" class="indexterm"/> <a id="objectcpr-IDXTERM-275" class="indexterm"/> <a id="objectcpr-IDXTERM-276" class="indexterm"/>Objective-C's method call model lends itself well to
      distributed systems, where sending messages is the fundamental unit of
      interaction. The key difference in distributed systems is that objects
      may exist in different address spaces, and so cannot call each other
      directly.</p><p>Objects that want to receive messages from other processes must
      specify those messages in a formal protocol. Objective-C provides
      special keywords to use when writing such a formal protocol that qualify
      the kind of sharing you will need for that protocol's message
      parameters.</p><p>You use the keywords to modify (or qualify) the type of a method's
      parameter or return value. For example, the keywords <code class="literal">out</code> and <code class="literal">in</code>
      modify the parameters in the following declaration:</p><a id="I_1_tt45"/><pre class="programlisting">-(<strong class="userinput"><code>void</code></strong>)<em class="replaceable"><code>getData</code></em>:(<strong class="userinput"><code>out</code></strong> 
            <em class="replaceable"><code>Data</code></em>*)<em class="replaceable"><code>data</code></em> 
            <em class="replaceable"><code>forIndex</code></em>:(<strong class="userinput"><code>in</code></strong> 
            <strong class="userinput"><code>int</code></strong>)<em class="replaceable"><code>index</code></em>;</pre><p>The signature of this method says that
      <em class="replaceable"><code>index</code></em> is only passed in and changes to it
      don't need to be returned, but the method will modify the value of
      <em class="replaceable"><code>data</code></em>.</p><p>You can't use these keywords in class or category declarations.
      However, if your class or category adopts a protocol that uses a remote
      messaging keyword, you can repeat the keyword in the method signature of
      the implementation.</p><p>The remote messaging keywords can be grouped into three
      categories: those for pointer parameters, those for return values, and
      those for object qualifiers.</p><div class="sect2" title="Pointer Parameter Qualifiers"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-6.1"/>Pointer Parameter Qualifiers</h2></div></div></div><p>This <a id="IXT-1-225" class="indexterm"/>section discusses qualifiers that generally apply to
        pointer arguments. They tell the compiler how to handle copying values
        between address spaces so that the pointers can be dereferenced in
        both spaces and see the same value. The pointer parameter qualifiers
        are as follows:</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong> <code class="literal">in</code>
            </strong></span></span></dt><dd><p><a id="IXT-1-226" class="indexterm"/>You will reading directly from the parameter, or
              will dereference the parameter to read a value but not to write
              one. This qualifier can be used for non-pointers.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">out</code> </strong></span></span></dt><dd><p><a id="IXT-1-227" class="indexterm"/>You will dereference the parameter to write a
              value but not to read one. This qualifier applies only to
              pointers.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">inout</code> </strong></span></span></dt><dd><p><a id="IXT-1-228" class="indexterm"/>You will dereference the parameter both to read
              and write a value. This qualifier applies only to
              pointers.</p></dd></dl></div><p>If you do not specify a qualifier, the compiler will assume a
        parameter is <strong class="userinput"><code>inout</code></strong>.</p><p>Certain <a id="IXT-1-229" class="indexterm"/>types have special behavior with pointer qualifiers. For
        example, when you declare a C-style string with type <strong class="userinput"><code>char</code></strong> <code class="literal">*</code>,
        the runtime system treats this as a value type (with value equal to
        the character string pointed to) and not a pointer, and ships the
        entire string across between method calls. If you want to pass a
        string by reference, you need to add another asterisk to its
        declaration in the parameter list for the method receiving the
        string.</p><p>The runtime treats Objective-C objects the same way. If you want
        assignments to the parameter to have an effect back in the calling
        code, you need to add an asterisk in the parameter declaration. Note
        that passing objects by reference in this sense is not the same as
        using the <strong class="userinput"><code>byref</code></strong> qualifier
        (described later in <a class="link" href="ch01s06.html#objectcpr-CHP-1-SECT-6.3" title="Object Qualifiers">Section
        1.6.3</a>).</p></div><div class="sect2" title="Return Value Qualifiers"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-6.2"/>Return Value Qualifiers</h2></div></div></div><p>Qualifying <a id="IXT-1-230" class="indexterm"/>a method's <a id="IXT-1-231" class="indexterm"/>return type with <strong class="userinput"><code>oneway</code></strong> <a id="IXT-1-232" class="indexterm"/> means the method executes asynchronouslyâ€”that is, its
        caller can continue execution without waiting for a response. Use
        <strong class="userinput"><code>oneway</code></strong> only in conjunction with
        methods with <strong class="userinput"><code>void</code></strong> return
        type.</p></div><div class="sect2" title="Object Qualifiers"><div class="titlepage"><div><div><h2 class="title"><a id="objectcpr-CHP-1-SECT-6.3"/>Object Qualifiers</h2></div></div></div><p>Object <a id="IXT-1-233" class="indexterm"/>qualifiers <a id="IXT-1-234" class="indexterm"/>modify types that describe instances of classes, either
        dynamically typed as <strong class="userinput"><code>id</code></strong> or
        statically with a class name, and specify whether the runtime needs to
        provide for interprocess method calls. The types modified can be
        either parameters or <a id="IXT-1-235" class="indexterm"/>return types.</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong> <code class="literal">bycopy</code> </strong></span></span></dt><dd><p><a id="IXT-1-236" class="indexterm"/>This parameter or returned object should be copied
              between address spaces (rather than setting up a proxy for
              inter-process method calls). The receiving code must know about
              the class of the object it gets.</p></dd><dt><span class="term"><span class="bold"><strong> <code class="literal">byref</code> </strong></span></span></dt><dd><p><a id="IXT-1-237" class="indexterm"/>The opposite of <strong class="userinput"><code>bycopy</code></strong>. This parameter or returned
              object should be exchanged by reference, and a proxy should be
              set up for handling method calls.</p></dd></dl></div><p>The default behavior is specified in the code for the class
        itself. In most cases the <a id="IXTR3-561" class="indexterm"/>
        <a id="IXTR3-562" class="indexterm"/> <a id="IXTR3-563" class="indexterm"/>default is <strong class="userinput"><code>byref</code></strong>.</p></div></div></body></html>
